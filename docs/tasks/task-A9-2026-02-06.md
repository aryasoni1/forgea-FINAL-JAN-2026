# Task A9 — Developer Experience & Guardrails

Date: 2026-02-06
Status: APPROVED

---

## Goal

Create a repository-level onboarding and guardrail baseline by pinning the Node runtime, defining editor formatting defaults, and publishing the documentation that makes those conventions discoverable for every contributor.

## Scope (Binding)

- Add a single canonical `/forgea-monorepo/.nvmrc` that pins Node.js 20.11.1 (nvm semantics) and keep `/forgea-monorepo/package.json` `engines.node` aligned to `>=20.11.0 <21`.
- Introduce `/forgea-monorepo/.editorconfig` matching the minimal hygiene baseline (UTF-8, LF, insert final newline, trim trailing whitespace, 2-space indentation for JS/TS/JSON/markdown/YAML).
- Publish a repository-level README.md focused on onboarding (Node, pnpm, Turbo, env pointers) with CONTRIBUTING.md covering guardrails, files-to-avoid, and review expectations, referencing the `.nvmrc`/`.editorconfig` assets.
- Extend the official docs set by authoring `/docs/official-docs/node-version-policy.md` and `/docs/official-docs/editorconfig.md`, referencing the official Node.js and EditorConfig sources and the chosen versioning/formatting decisions.
- Update `/docs/docs-gatekeeper/EPIC-A — MONOREPO & DEVELOPER TOOLING FOUNDATION/A9_Developer Experience & Guardrails.md` to record the completion of these documentation requirements.

### Out of Scope

- Implementing automated CI enforcement of Node versions or EditorConfig (beyond documenting the requirements).
- Changing the onboarding UI inside `apps/forgea-labs`; the onboarding documentation is purely repository-level text.
- Reworking unrelated tooling versions such as Turborepo or pnpm beyond what is needed to describe the Node/EditorConfig guardrails.

## Preconditions

- Code Scout findings for A9 have been reviewed (`/docs/code-scout/EPIC-A — MONOREPO & DEVELOPER TOOLING FOUNDATION/A9_Developer Experience & Guardrails.md`).
- Docs Gatekeeper highlighted the missing Node version and EditorConfig documentation and must be updated once the docs exist (`/docs/docs-gatekeeper/EPIC-A — MONOREPO & DEVELOPER TOOLING FOUNDATION/A9_Developer Experience & Guardrails.md`).
- Toolchain versions are governed by `/docs/toolchain-versions.md`, which currently pins Node 20.11.x and the `>=20.11.0 <21` engine range.

## Locked Decisions (Derived from Documentation)

- Node.js runtime must stay within `>=20.11.0 <21.0.0` and is documented in `/docs/toolchain-versions.md`, so `.nvmrc` and `package.json` `engines` must reflect that range.
- The EditorConfig plan must reference the official EditorConfig specification (`https://editorconfig.org`) and match whatever indentation/line endings the existing code base already exhibits, as no other spec is authoritative.
- Repo-level documentation must acknowledge the implementer guardrail in `/.github/agents/implementer.md` forbidding edits to files listed there.

## Resolved Decisions (User-Provided)

- A top-level developer onboarding doc (README/CONTRIBUTING) is necessary because the existing onboarding UI lives only within `apps/forgea-labs`.
- The `package.json` currently lacks an `engines` field; adding it is required to declare the supported Node runtime.

## Invariants (Must Not Be Violated)

- The repository must still refuse to commit `.nvmrc`, `.editorconfig`, or README content that includes actual secrets.
- Documentation updates must cite the official Node.js and EditorConfig sources; e.g., credit `https://nodejs.org/en/about/releases/` and `https://editorconfig.org`.
- No files listed under `.github/agents/implementer.md` may be touched unless explicitly permitted.

## Step-by-Step Plan (Non-Code)

1. Confirm Node `>=20.11.0 <21` is the supported range, note that `.nvmrc` must pin `20.11.1`, `package.json.engines.node` covers the range, and document nvm as the canonical manager (mention Volta/asdf as alternatives) in `/docs/official-docs/node-version-policy.md`.
2. Capture indentation/line endings and encode them in `.editorconfig` with the agreed minimal hygiene block (`root=true`, charset UTF-8, LF line endings, insert final newline, trim trailing whitespace, 2-space indent for JS/TS/JSON/MD/YAML), then describe this config in `/docs/official-docs/editorconfig.md` referencing the official spec.
3. Write README.md as the onboarding entry point covering Node/pnpm/Turbo/env usage and linking to `.nvmrc`/`.editorconfig`; use CONTRIBUTING.md for guardrails (files-to-avoid, agent rules, review expectations) to keep onboarding and guardrails separate.
4. Create `/docs/official-docs/node-version-policy.md` with the Node version pin, rationale, official source links, and any preferred version manager (e.g., `nvm`, `Volta`, whichever is preferred once confirmed).
5. Create `/docs/official-docs/editorconfig.md` documenting the canonical `.editorconfig`, referencing the spec, and explaining how editors or CI should honor it.
6. Update `/docs/docs-gatekeeper/EPIC-A — MONOREPO & DEVELOPER TOOLING FOUNDATION/A9_Developer Experience & Guardrails.md` to reflect that the required docs now exist and list where reviewers can find the new guidance.
7. Surface the plan’s testing strategy in `/docs/tests/task-A9-tests.md` (describing how to verify the presence and correctness of the new files and docs) so QA has a deterministic checklist.

## Files Expected to Modify

- forgea-monorepo/.nvmrc (create with Node 20.11.x pin)
- forgea-monorepo/.editorconfig (new canonical editor config)
- forgea-monorepo/package.json (`engines` field specifying Node `>=20.11.0 <21`)
- forgea-monorepo/README.md (new or updated developer onboarding content)
- forgea-monorepo/CONTRIBUTING.md (new or updated guardrails content)
- docs/official-docs/node-version-policy.md (new doc describing runtime policy)
- docs/official-docs/editorconfig.md (new doc describing formatting baseline)
- docs/docs-gatekeeper/EPIC-A — MONOREPO & DEVELOPER TOOLING FOUNDATION/A9_Developer Experience & Guardrails.md (record the gatekeeper approval status once docs exist)

## Files to NOT Touch

- Any files explicitly referenced in `/.github/agents/implementer.md` as off-limits (e.g., sensitive verification artifacts).
- App-specific onboarding pages under `apps/forgea-labs` and unrelated service READMEs.

## Acceptance Criteria

- `.nvmrc` exists with the `20.11.1` pin, and `package.json.engines.node` covers `>=20.11.0 <21`.
- `.editorconfig` exists with the agreed hygiene entries and is documented in `/docs/official-docs/editorconfig.md`.
- README.md serves as the onboarding entry point (Node/pnpm/Turbo/env) and LINKS to the guardrail doc plus `.nvmrc`/`.editorconfig`.
- CONTRIBUTING.md records guardrails (files-to-avoid, agent rules, review expectations) and points to the new docs.
- `/docs/official-docs/node-version-policy.md` and `/docs/official-docs/editorconfig.md` are authored, reference their official sources, and are linked from the README/CONTRIBUTING content.
- Docs Gatekeeper entry for A9 is updated to note the completion of these docs and to transition the status from `REQUIRED` to `VERIFIED` (or equivalent).

## Verification Criteria (Machine-Checkable)

- `git status` shows the presence of `.nvmrc`, `.editorconfig`, and the updated README/CONTRIBUTING files.
- `package.json` includes an `engines.node` field set to `>=20.11.0 <21`.
- `/docs/official-docs/node-version-policy.md` and `/docs/official-docs/editorconfig.md` exist and mention the official URLs.
- `/docs/docs-gatekeeper/EPIC-A — MONOREPO & DEVELOPER TOOLING FOUNDATION/A9_Developer Experience & Guardrails.md` reflects the new documentation.

## Risks & Tradeoffs

- Overloading the README with too much onboarding detail may discourage reading; keep the developer guide concise while pointing to the detailed docs.
- Without a confirmed preferred version manager (nvm vs Volta), the node-version policy doc may need future tweaks; flag this to avoid incorrect instructions.
- EditorConfig decisions could conflict with Prettier or ESLint settings; ensure the config only covers editor-level defaults that the formatters do not override.

## Open Questions

- None; Node manager (nvm) and version (`20.11.1`/.nvmrc, `>=20.11.0 <21`/engines) plus `.editorconfig` blocks and README/CONTRIBUTING roles are locked.

## Dependencies

- Blocked by: Finalized `.editorconfig` style choices (currently the minimal block) so the docs can cite exact values; nvm is canonical.
- Unlocks: Consistent developer setup, deterministic onboarding, and a documented guardrail for contributors.

## Test Plan

- Document the verification steps in `/docs/tests/task-A9-tests.md` (e.g., `cat .nvmrc`, inspect `package.json`, review the new docs) so QA has a machine-checkable checklist once implementation is complete.

## Docs Gatekeeper Output

- `/docs/docs-gatekeeper/EPIC-A — MONOREPO & DEVELOPER TOOLING FOUNDATION/A9_Developer Experience & Guardrails.md` (currently flags missing Node version and EditorConfig docs; update once the docs are added).
