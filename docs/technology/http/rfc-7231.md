# RFC 7231

- Category: HTTP
- Epics: J, K
- Version / Requirement: RFC 7231
- Intent / Critical Decision: Idempotency, status codes, and retry semantics.

## EPIC-G — Notes

- Mentioned in: EPIC-G — PUSH FLOW & SNAPSHOT PREVIEW
- EPIC-G intent: Authoritative status-code and retry guidance for webhook intake, snapshot build triggers, and idempotent handler design.
- Important points:
  - Use RFC 7231 to justify idempotency policies (which status codes trigger provider retries) in `G1` and `G2` briefs.
  - Document recommended response semantics for webhook handlers (e.g., 202/2xx for accepted processing, 4xx for bad signatures, 5xx for transient failures to trigger retries) and map these to provider behaviors.
  - Reference RFC-backed guidance in deduplication and idempotency policy documents linked from EPIC-G planner specs.

## EPIC-J — Notes

- Define idempotency semantics and status-code mappings for progress saves (e.g., 2xx for success/accepted, 4xx for client errors, 5xx for transient server errors that should trigger retries).
- Document idempotency keys and retry/backoff expectations for clients (to avoid duplicate writes and retry storms).

## EPIC-I — Notes

- Mentioned in: EPIC-I — ANTI-CHEAT & ABUSE CONTROL SYSTEM
- EPIC-I intent: Use RFC 7231 guidance for client-visible retry semantics (`Retry-After`) and status-code choices used by rate-limiting and enforcement layers.
- Important points:
  - Document expected `Retry-After` semantics for rate-limited responses and map them to enforcement/backoff policies used by detection and enforcement components.
  - Ensure clients and edge layers expose consistent status codes to avoid mis-triggered retries that could amplify alert storms or DoS scenarios.
  - Ensure API contracts reference RFC-backed semantics so client and server implementations align on retry behavior and acceptable error codes.

## EPIC-D — Notes

- Mentioned in: EPIC-D — LESSON CREATION SYSTEM (D3 Knowledge Ingestion, D9 Serving & Rendering)
- EPIC-D intent: Apply RFC 7231 semantics for ingestion and serving endpoints to standardize fetch/retry behavior and caching semantics used by lesson previews and ingestion pipelines.
- Important points:
  - Use RFC-backed status code semantics to drive ingestion retry/backoff and preview serving behavior (conditional GETs, 304 handling, cache-control headers for previews and immutable lesson assets).
  - Define acceptable status codes for ingestion (redirect handling, transient vs permanent failures) and map them to orchestrator retry rules.
  - Document caching headers and conditional request handling for lesson read APIs to support efficient previews and CDN behavior.
